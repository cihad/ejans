<% case @event %>
<% when "add_child_items" %>
  $('#overlay').append("<%=j static_modal(@parent_item.name) { render 'trees/form' } %>")
<% when "show" %>
  if ( $('#<%= dom_id @parent_item %> ul').size() == 0 ) {
    $('#<%= dom_id @parent_item %>').append("<%=j render 'trees/list', items: @child_items %>");
  }
<% when "add_item" %>
  $('#overlay').append("<%=j static_modal(@parent_item.try(:name) || "New Item") { render 'trees/form' } %>")
<% end %>